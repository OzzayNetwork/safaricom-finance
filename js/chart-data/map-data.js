$(function () {

    // Initiate the chart
    $('#the-map-container').highcharts('Map', {
        series: [{
            animation: {
                duration: 1000
            },
            name: "Collected Revenue",
            colorByPoint: false,
            color: '#3b3b3b', // blue
            borderWidth: 1,
            borderColor: '#212327',
			borderColor: '#212327',
             dataLabels: {
                enabled: true,
                backgroundColor: 'rgba(0,0,0,0.3)',
                borderRadius: 0,
                padding: 4,
//                color: '#a5a8ad',
                format: '{point.name}',
				 shadow: "none",
               
                style: {
                    textTransform: 'uppercase',
                    fontWeight: '500',
					fontFamily: '"Muli", sans-serif',
  					fontSize: '1rem'
                }
            },
			symbol:'circle',
			 marker: {
            symbol: 'square'
        },
    

            "type": "map",
            "joinBy": "id",
            "mapData": [
                {
                  "id": "id0",
                  "name": "Kisauni",
                  "path": "M143,53,141,53,140,52,138,53,136,53,135,54,135,55,128,55,126,55,123,54,121,54,120,52,119,52,116,52,114,51,112,50,110,50,107,51,98,52,94,53,92,53,89,54,87,55,87,55,86,56,85,57,85,58,85,59,84,60,83,59,83,59,82,60,82,60,82,61,83,62,83,62,84,62,85,62,86,62,86,62,87,63,88,64,88,64,87,64,87,64,87,65,87,65,88,65,88,65,89,65,89,65,89,66,89,66,89,66,89,66L89,66L90,67,91,67,91,66,92,66L92,66L93,67,93,67,93,68,94,68,94,69,95,69,94,70,94,70,94,70,93,70,93,71,92,71,92,72,92,72,93,72,94,72,94,74,93,75,93,75,93,75,96,75,96,75,97,76,97,76,97,77,97,77,97,77,97,78,96,77,95,77,95,78,95,78,93,78,93,78,92,80,91,80,90,80,90,81,90,82,90,83,90,85,91,85,92,86,93,86,93,86,93,87,94,87,95,87,96,87,96,87,97,87,97,87L97,87L98,89,99,89,100,89,101,91,101,92,101,93,101,93,100,93,100,93,100,93,100,94,99,94,99,94,99,94,99,95,100,95,101,95,101,96,102,96,103,96,104,96,104,95,105,95,105,96,105,96,105,97,105,97,104,97,104,98,104,99,104,100,104,101,104,101,104,102L104,102L104,103,105,104,106,104,107,107,107,107,107,107,107,108,107,108,107,110,107,110,108,110,109,109,109,109,109,108,110,108,111,111,111,111,111,111,111,111,110,112,110,112,110,112,111,113,111,113,112,113,112,113,112,114,112,114,112,115,112,116,112,116,112,117,113,118,113,119,112,119,111,119,111,120,110,119,108,120L108,121L108,121,108,121,108,121,108,121,108,121,108,122,108,122,109,124,110,127,112,127,113,128,114,129,115,130,115,130,115,131,115,132,115,132,115,133,114,135,113,136,112,137,110,138,109,138,109,138,108,138,108,139,108,139,108,139,108,139,107,139L107,139L106,139,106,139,106,139,106,139,105,140,105,140,104,139,104,140,104,142,104,146,105,146,106,147,106,148,107,148,107,149,108,149,108,150,109,150,110,149,111,150,112,150,112,149,113,149,113,149,114,149,114,149,115,149,115,149L115,148L115,148,116,148,116,148,117,148,117,148,117,148,117,147,117,147,117,146,117,146,117,146,117,145,116,143,117,142,117,141,118,142,118,143,117,144,118,145,118,146,119,147,119,147,118,148,118,149,119,149,118,149,118,149,117,149,117,150,117,150,117,150,117,150,116,150,115,150,114,150,114,150,114,151,114,151,114,151,114,152,114,152,114,153,115,153,115,154,115,154,115,155,115,155,115,156,116,156,116,156,116,157,116,157,116,157,116,157,116,157,117,157,117,157,118,157,118,156,119,156,119,156,119,156,120,157,120,157,121,158,121,158L121,159L121,159,121,159,121,160,121,162,121,163,122,163,121,163,121,164,121,164,121,164,121,164,120,164,120,164,120,164,120,165,121,164,122,164,125,161,126,160,125,159,126,159,126,158,127,156,127,155,129,153,130,151,132,146,134,142,136,139,137,136,138,134,139,132,141,130,142,128,143,128,147,128,149,127,152,127,154,129,154,129,156,129,158,129,158,129,159,129,160,130,162,131,165,132,166,132,167,133L168,133L168,133,170,133,171,131,173,128,174,126,175,124,177,122,179,120,180,117,182,115,186,111,188,108,189,107,190,106,191,106,192,105,192,104,192,103,194,102,194,101,195,100,197,98,198,97,200,95,204,91,205,91,206,90,206,89,205,89,205,88,204,88,204,88,203,88,203,87,203,87,202,87,202,87,200,87,199,87,198,87,198,87,197,87,197,88,197,88,195,88,194,88,194,88,194,87,194,87,194,87L193,87L193,87,192,87,192,87,191,86,191,86,191,86,190,86,189,86,189,86,189,86,188,86,188,86,188,86,187,85,187,85,186,84,186,84,186,84L185,84L185,84,185,83,184,83,183,82,183,82,182,82,182,82,181,81,181,81,181,80L181,80L180,80,179,80,179,80,178,81,177,82,177,82,176,82L176,83L176,83,176,83,175,84,174,83,173,84,173,84,173,84,172,84,168,84,166,84,166,84,165,84,165,84,165,83,164,84L163,84L161,84,160,84,160,83,159,83L159,83L159,83,158,83,158,82,157,82,157,82,156,82,155,82,155,81,155,80,155,80,154,80,154,79,154,79,154,79,152,79,151,80,149,79,150,78,150,77,150,77,149,76,149,76,149,76,148,77,148,76,148,76L148,76L148,76L148,76L147,76,146,76,146,75,146,75,146,75,145,75,145,75,145,75,145,75L145,74L145,74,144,73,143,73,143,72,143,72,142,71,142,71,142,70,142,70,141,69,141,69,141,69,141,68,141,68,141,67L141,65L141,65,140,65,140,64,140,63,140,63,140,63,140,62,140,62,140,62,141,61,141,60,141,60,141,60,141,60,141,60,141,59,141,58,142,58,142,56,142,56,142,55,142,55,142,55,143,55,143,54,143,54,143,53,143,53,143,53,143,53,143,53,143,53zM57,98,60,97,61,96,61,95,62,93,65,90,66,89,67,89,68,90,70,91,70,91,72,91,74,90,80,87,81,86,83,86,87,86,88,87,90,88,91,88,94,88,94,89,95,89,96,90,97,90,98,91,99,94,98,95,98,97,99,101,99,105,103,110,104,112,104,114,104,115L104,116L102,118,101,118,100,118,98,118,97,117,96,116,95,116,94,115,93,115,93,115,92,113,92,113,92,112,92,111,92,111L92,110L92,110,91,109,91,108,89,107,88,106,87,106,87,106,86,106,85,106,84,105,84,105,83,105,82,105,82,106,82,106,81,107,80,107,79,108,78,109,76,110,75,110,73,112,73,111,71,111,70,111,70,110,70,110,69,109,67,109,66,107,66,107,64,106,64,106,62,106,62,106,60,105,59,104,59,102,59,100,58,100,58,100,58,100,58,98,58,98z"
                },
                {
                  "id": "id1",
                  "name": "Nyali",
                  "path": "M120,165,122,164,125,161,126,160,125,159,126,159,126,158,127,156,127,155,129,153,130,151,132,146,134,142,136,139,137,136,138,134,138,133,139,132,141,130,142,128,147,128,152,127,154,129,156,129,158,129,158,129,159,129,162,131,165,132,166,132,167,133L168,133L168,133,170,133,169,136,169,137,169,138,170,139,170,140,170,141,170,142,171,143,172,144,173,144,174,144,174,144,174,145,173,147,172,148,171,148,170,148,169,148,169,148,168,149,167,150,167,151,166,152,166,153,165,153,164,155,163,156,160,161,156,167,155,168,154,170,154,170,154,171,154,171,153,172,153,172,152,173,151,173,151,174,150,175,149,178,148,179,147,180,147,180,146,181,146,182,146,182,145,182,144,183,143,184,143,184,142,184,141,185,140,186,139,186,138,187,136,187,135,187,132,187,131,187,130,186,129,186,129,186,129,186,129,185,129,185,128,185,128,184,128,184,128,184,127,183,127,182,125,180,125,178,125,178,125,178,126,177,125,176,125,176,125,176,125,175,125,173,125,172,125,170,125,169,124,168,124,168,123,167,123,168L123,168L122,167,120,167,120,166z"
                },
                {
                  "id": "id2",
                  "name": "Mvita",
                  "path": "M118,161,118,161,115,161,115,161,114,161,114,160,113,159,112,159,112,159L112,158L111,158,111,157,110,156,110,156L110,156L110,156,110,156,109,156,109,156,109,156,109,155,106,156,105,155,105,155,104,156,103,156,103,156,103,157,102,157,101,157,101,157,101,157,101,157L100,157L100,158,100,158,99,158,99,158,99,158,99,158,99,158,99,158,99,159,98,159,97,159,97,159,97,160,96,161,96,161,95,162,95,162,94,163,93,163,93,164,93,164,93,164,93,164,92,164,92,163,91,163,91,163,90,163,90,163,89,163,88,163,87,163,87,163,87,163,87,163,86,163,86,163,86,163,85,163,85,163,85,164,85,165,85,166,85,166,85,167,85,167,85,168,85,168,85,169,85,169,85,170,86,170,86,171,87,171,88,172,88,173,89,173,89,173,89,174,90,174,90,175,90,175L90,176L90,176,90,176L90,177L90,178,91,179,91,181,91,183L91,183L91,185,91,185L91,185L92,185,92,185,92,186,92,186,93,186,93,185,94,186,94,186,94,186,94,186,94,186,95,186,95,187,96,187,96,188,97,188,97,189,98,189,98,189,98,189L98,190L98,190,98,190,99,191,99,191,99,191,99,191,100,192,101,192,101,193,101,193,102,193,102,193,103,194,103,194,103,194,104,194,104,194,104,195,104,195,105,195,105,195,105,195,105,193,105,193,106,192,106,192,106,192,106,193,106,194,106,194,107,194,107,195,107,196,107,197,107,197,106,197,106,197,106,198,106,198,106,199,107,199,107,199,107,200,108,200,108,200,108,201,109,201,109,201,109,201,110,202,110,202,113,202,115,202,116,201,116,201,117,200,118,199,119,198,120,197,120,198,120,197,121,197,121,197,121,197,122,197,122,196,122,196,123,196,123,196,124,196,124,196,124,196,125,195,125,196,125,196,125,189,125,189,125,187,124,186,124,186,124,186,124,185,124,185,123,184,123,184L123,184L123,184,123,183,122,182,120,180,118,179L118,177L118,177,119,177,119,176,119,176,119,176,119,176,119,175,119,175L119,175L119,175,120,174,120,174,120,174,121,173,120,173,121,172,121,172,121,171,120,171L118,171L117,171,117,171,116,170,116,170,116,170,115,170,115,170,114,170,114,170,114,169,114,168,114,168,114,167,114,166,114,165,114,165,114,165,115,165L115,165L115,165L115,165L115,165,115,165,116,165,116,165,116,165,116,164,117,164,117,164,117,164,117,163,117,163,118,163,118,163,118,163z"
                },
                {
                  "id": "id3",
                  "name": "Changamwe",
                  "path": "M33,169,33,167,34,163,43,147,46,144,51,134,53,135,54,134,56,134,57,134L61,134L67,135,69,136,71,136,74,138,77,141,77,141,77,143,77,149L77,149L77,150,76,152,76,154,76,154,80,155,84,155,86,156,88,156,90,157,92,157,94,157,94,158,93,159,93,160,91,160,91,162,90,162,89,162,89,162,89,161,88,160,88,160,88,159,86,159,85,159,84,159,83,159,83,159,83,158,82,158,82,159,81,159,81,159,81,160,81,160,81,160,81,161,80,161,80,161,80,161,80,162,80,162,81,163,82,163,82,164,82,164,82,164,82,164,82,165,83,165,83,166,83,166,83,167,83,167,82,167,82,167,80,167L80,167L79,168,79,168,79,168,77,168,76,168,75,168,74,168,74,169,74,169,73,169,73,169,72,169,72,169,72,169,71,169,71,169,71,170,71,170,71,170,70,170,70,170,69,170,69,171,69,171,69,171,68,171,68,171,68,171,68,171,68,172,67,172,67,172,66,172,66,171,66,171,65,171,64,171,64,171,64,171,63,171,63,171L63,171L62,171,62,171,62,172,61,172,61,173,62,174,61,174,61,174,60,174,60,174,59,175,59,175,59,174,58,174,58,173,58,173,57,172,57,171,57,171,57,170,57,170,55,170L51,170L46,170,45,170,45,169,44,169,43,169,43,168,41,169,37,169,36,168,36,169,35,169,35,169,34,169,34,169z"
                },
                {
                  "id": "id4",
                  "name": "Jomvu",
                  "path": "M33,169,30,169,27,168,27,166,27,165,28,165,28,165,28,163,28,163,29,163,29,162,28,162,31,155,32,154,32,154,31,153,31,152,31,151,30,151,29,151,26,151,23,151,19,151,17,150,16,149,15,148,12,147,12,144,11,143,11,141,11,140,12,138,13,136,13,134,14,132,14,131,14,130,14,129,12,123,12,121,13,120,17,112,13,109,13,107,12,107,12,105,13,105,13,104,14,103L14,102L26,98,31,92,41,83,45,82,47,82,49,85,53,86,53,88,52,89,48,93,48,94,48,95,50,95,50,95,51,95,52,95,52,96,52,96,51,98,50,99,51,100,50,101,52,103,52,106,53,107,52,107,50,107,49,108,48,108,48,109,47,109,45,112,45,113,43,113,43,113,42,113,42,114,42,115,43,115,46,115,49,113,50,112,51,111,52,112,53,112,53,112,54,111,54,111,55,110,55,110,55,110,55,111,56,112,57,112,57,113,58,113,58,113,58,113,58,113,58,113,59,115,59,117,60,118,61,118,63,118,64,120,65,121,66,120,68,120,69,121,68,121,69,123,70,122,70,121,71,120,72,119,71,118,75,118,75,119,77,120,76,119,77,118,79,119,80,120,80,120,80,121,80,121,80,122,80,122,80,124,79,126,80,128L80,129L80,130,80,131,81,132,81,133,81,134,80,135,81,136,81,138,82,139,83,140,85,141,85,142,85,142,85,144,85,145,84,147,84,149,84,151,84,152,84,152,84,153,85,153,86,153,87,153,87,153,87,153,87,153,87,154,88,153,88,153,89,154,89,154,90,155,90,155,90,155,91,155,92,155,92,155,93,155,93,155,94,155,94,154,94,154,94,154,95,154,95,155,95,155,94,155,94,155,94,155L94,157L92,157,90,157,88,156,86,156,84,155,80,155,76,154,76,154,76,152,77,150,77,149,77,141,77,141,74,138,71,136,69,136,67,135,61,134L57,134L56,134,54,134,53,135,51,134,46,144,43,148,34,163z"
                },
                {
                  "id": "id5",
                  "name": "Likoni",
                  "path": "M82,175,82,179,83,179,83,182,84,183,84,184,84,184,84,185,85,186,85,186,85,187,86,193,87,195,88,195,89,196,89,197,90,197,91,198,91,198,92,198,92,199,92,199,92,200,92,201,91,202,90,202,90,204,90,205,89,206,88,207,88,208,87,208,87,208,88,208,89,208,89,207,90,207,92,204,92,203,93,202L93,202L93,200,94,200,94,200,94,199,98,199,100,201,105,205,106,206,106,206,107,206,108,206,108,206,109,206,111,206,113,206,114,206,115,207,115,207,116,207,116,207,117,207,117,208,117,207,118,208,118,209,118,209,117,210,117,210,117,211,117,213,118,214,118,214,118,216,117,218,117,219,116,220,116,220,116,220,116,221,115,222,115,222,115,223,115,223,114,223,114,224,114,224,114,225,114,225,114,226,114,226,113,226,113,226,113,227,112,227,111,230,108,233,107,235,107,235,107,237,105,237,100,237,96,238,91,239,88,239,85,241,83,242,81,242,80,242,77,241,77,240,74,237,74,236,72,235,71,231,69,230,68,229,68,228,66,226,67,226,64,225,63,223,59,220,58,218,56,217,53,221,51,223,50,224,47,224,37,224,34,225,33,223,32,221,33,218,32,217,30,216,28,215,30,212,30,211,30,210,31,209,33,209,33,210,33,209,32,208,32,206,31,206,32,205,32,204,30,201,31,200L32,200L32,200,32,200,33,199,34,200,34,200,34,199,35,199,35,199,35,198L35,198L36,197,36,197,36,197,36,196,36,195,37,194,38,194,39,194,39,194,39,195,39,196,39,196,39,197,40,196,41,197,42,196,41,196,41,194,42,193,41,192,42,191,42,192,43,191,42,190,40,190,39,191,38,191,37,190,37,189,38,189,41,189,41,190,42,190,42,189,43,189,44,189,45,189,46,188,46,188,47,188,47,188,48,189,49,189,50,189,50,189,50,188,50,188,51,188,51,189,51,188,52,188L52,188L53,188,54,190,55,190,55,191,56,190,56,191,56,191L58,191L58,191,58,192,59,192,59,191,59,191,59,190,60,190,60,189,59,188,60,187,60,186,60,186,61,184,62,184,62,185,63,185,64,184,64,184,64,184,64,184,64,185,65,185,65,184,66,184,66,185,67,185,67,186,68,186,68,187,69,186,69,187,69,187,69,187,70,187,70,187,72,187,72,187,72,187,72,188,73,188,73,188,73,187,73,187L74,187L74,187,74,187,75,187,75,187,75,186,76,186,77,186,77,185,77,185,78,185,78,185,78,185,79,185,79,184,80,184,80,184L80,184L81,184,81,183,81,182,81,182,81,182,82,181,81,181,81,180,81,180,81,179,80,179,80,178,80,177,81,177,81,176,81,175,81,175L82,175L82,175z"
                }
              ],
            data: [{
                    //Langata
                    "id": "id0",
                    "y": 0,
                    drilldown: 'langata',
                    value: 30
                },
                {
                    //dagoreti south
                    "id": "id1",
                    "y": 1,
                    value: 6,
                    drilldown: 'dagoreti_south',
                    name: "Point2",
                },
                {
                    //kibra
                    "id": "id2",
                    "y": 2,
                    drilldown: 'kibra',
                    value: 252389
                },
                {
                    //dagoreti north
                    "id": "id3",
                    "y": 3,
                    value: 256488
                },
                {
                    //starehe
                    "id": "id4",
                    "y": 4,
                    value: 924656
                },
                {
                    //westlands
                    "id": "id5",
                    "y": 5,
                    value: 333
                },
                {
                    //embakasi south
                    "id": "id6",
                    "y": 6,
                    value: 3216
                },
                {
                    //makadara
                    "id": "id7",
                    "y": 7,
                    value: 23215
                },
                {
                    //embakasi west
                    "id": "id8",
                    "y": 8,
                    value: 1564962
                },
                {
                    //embakasi central
                    "id": "id9",
                    "y": 9,
                    value: 3165

                },
                {
                    //kamkunji
                    "id": "id10",
                    "y": 10,
                    value: 6216532
                },
                {
                    //embakasi north
                    "id": "id11",
                    "y": 11,
                    value: 56523
                },
                {
                    //embakasi east
                    "id": "id12",
                    "y": 12,
                    value: 132132
                },
                {
                    //kasarani
                    "id": "id13",
                    "y": 13,
                    value: 65413
                },
                {
                    //ruaraka 
                    "id": "id14",
                    "y": 14,
                    value: 656132
                },
                {
                    //mathare
                    "id": "id15",
                    "y": 15,
                    value: 321165
                },
                {
                    //roysambu
                    "id": "id16",
                    "y": 16,
                    value: 1632
                },
                {
                    //unmatched      
                    "id": "id18",
                    "y": 18,
                    value: 11365895
                },
                {
                    //langata
                    "id": "id19",
                    "y": 19,
                    value: 3
                }
            ]
        }],
        drilldown: {
            chart: {
                backgroundColor: 'transparent',
                type: 'column'
          },
            series: [{
              type: 'bar',
              id: 'langata',
              name: 'langata',
              colorByPoint: true,
              data: [{
                name: '1st',
                y: 22,
                drilldown: 'dec1'
            },
            {
                name: '2nd',
                y: 22,
                drilldown: 'dec2'
            },
            {
                name: '3rd',
                y: 224,
                drilldown: 'dec3'
            },
            {
                name: '4th',
                y: 202,
                drilldown: 'dec3'
            },
            {
                name: '5th',
                y: 272,
                drilldown: 'dec5'
            },
            {
                name: '6th',
                y: 172,
                drilldown: 'dec6'
            }, {
                name: '7th',
                y: 122,
                drilldown: 'dec6'
            }, {
                name: '8th',
                y: 172,
                drilldown: 'dec8'
            }, {
                name: '9th',
                y: 105,
                drilldown: 'dec9'
            }, {
                name: '10th',
                y: 272,
                drilldown: 'dec10'
            }, {
                name: '11th',
                y: 272,
                drilldown: 'dec11'
            }, {
                name: '12th',
                y: 572,
                drilldown: 'dec12'
            }, {
                name: '13th',
                y: 72,
                drilldown: 'dec13'
            }, {
                name: '13th',
                y: 292,
                drilldown: 'dec13'
            }, {
                name: '14th',
                y: 472,
                drilldown: 'dec14'
            }, {
                name: '15th',
                y: 272,
                drilldown: 'dec15'
            }, {
                name: '16th',
                y: 394,
                drilldown: 'dec16'
            }, {
                name: '17th',
                y: 27,
                drilldown: 'dec17'
            }, {
                name: '18th',
                y: 372,
                drilldown: 'dec18'
            }, {
                name: '19th',
                y: 524,
                drilldown: 'dec19'
            }, {
                name: '20th',
                y: 564,
                drilldown: 'dec20'
            }, {
                name: '21st',
                y: 272,
                drilldown: 'dec21'
            }, {
                name: '22nd',
                y: 22,
                drilldown: 'dec22'
            }, {
                name: '23rd',
                y: 272,
                drilldown: 'dec23'
            }, {
                name: '24th',
                y: 272,
                drilldown: 'dec24'
            }, {
                name: '25th',
                y: 172,
                drilldown: 'dec25'
            }, {
                name: '26th',
                y: 272,
                drilldown: 'dec26'
            }, {
                name: '27th',
                y: 272,
                drilldown: 'dec27'
            }, {
                name: '28th',
                y: 452,
                drilldown: 'dec28'
            }, {
                name: '29th',
                y: 458,
                drilldown: 'dec29'
            }, {
                name: '30th',
                y: 226,
                drilldown: 'dec30'
            }, {
                name: '31st',
                y: 152,
                drilldown: 'dec31'
            }
              ]
            },{
              type: 'bar',
              id: 'dagoreti_south',
              name: 'dagoreti_south',
              colorByPoint: true,
              data: [
                ['Column1OC', 9],
                ['Column2OC', 1],
                ['Column3OC', 4]
              ]
            },{
              type: 'bar',
              name: 'kibra',
              id: 'kibra',
              colorByPoint: true,
              data: [
                ['Column1AF', 6],
                ['Column2AF', 6],
                ['Column3AF', 5]
              ]
            },{
              type: 'bar',
              name: 'Asia',
              colorByPoint: true,
              data: [
                ['Column1AS', 9],
                ['Column2AS', 1],
                ['Column3AS', 2]
              ]
            },{
              type: 'bar',
              name: 'North America',
              colorByPoint: true,
              data: [
                ['Column1NA', 9],
                ['Column2NA', 1],
                ['Column3NA', 9]
              ]
            },{
              type: 'bar',
              name: 'South America',
              colorByPoint: true,
              data: [
                ['Column1SA', 2],
                ['Column2SA', 9],
                ['Column3SA', 2]
              ]
            }]
          },
        chart: {
            type: 'column',
            backgroundColor: 'transparent'
        },
        lang: {
            thousandsSep: ','
        },
        title: {
            text: 'Collections By sub County',
            style: {
                color: '#a5a8ad',
				align: 'left'
            }
        },
        mapNavigation: {
            enabled: true,


        },
        colorAxis: {
            fill: 'red',
            min: 1,
            backgroundColor: 'red',
            type: 'logarithmic',
            minColor: '#3b3b3b',
            maxColor: '#45d21a',
            /* stops: [
                [0, '#3b3b3b'],
                [0.46, '#40802c'],
                [1, '#45d21a']
            ] */
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'bottom',
            floating: true,
            backgroundColor: 'transparent',
            shadow: false

        },

        tooltip: {
            headerFormat: '<span style="font-size:16px; font-weight:800;">{series.name}</span><br>',
            pointFormat: '<span  style="font-size:16px; font-weight:800; color:{point.color}; text-transform:ucapitalize;">{point.name}</span>: <b style="color:{point.color}">KES {point.value}</b><br/>',


        },

        /* navigation: {
          buttonOptions: {
            theme: {
              'stroke-width': 1,
              stroke: 'white',
              r: 0,
              states: {
                hover: {
                  fill: '#bada55'
                },
                select: {
                  stroke: '#039',
                  fill: '#bbadab'
                }
              }
            }
          }
        } */


    });

});

//setting todays date
var the_date =moment().format("MMMM Do YYYY");
	$('.map-date').text(the_date);

// button functions

// the financial year's data
$('#financial-year').click(function () {
	//getting financial year
	var this_year=moment().format("YYYY");
	var last_year=moment().subtract(1, 'year').format("YYYY");
	var next_year=moment().add(1, 'years').format("YYYY");
	var this_month=moment().format("MM");
	var this_month=parseInt(this_month);
	var fy=last_year+"/"+this_year;
	if(this_month>6){
		fy=this_year+"/"+next_year;
	}
	
	$('.map-date').text(fy+" Financial Year");
	 //changing color axis colors
	$(this).addClass("active").siblings().removeClass("active");
    $('#the-map-container').highcharts()
        .colorAxis[0].update({
            min: 1,

            minColor: '#3b3b3b',
            maxColor: '#2e71ff'
        });
    var chart2 = $('#the-map-container').highcharts();
    //the data 
    chart2.series[0].update([{
            "id": "id0",
            "y": 0,
            value: 330
        },
        {
            //dagoreti south
            "id": "id1",
            "y": 1,
            value: 36,

        },
        {
            //kibra
            "id": "id2",
            "y": 2,
            value: 3252389
        },
        {
            //dagoreti north
            "id": "id3",
            "y": 3,
            value: 3256488
        },
        {
            //starehe
            "id": "id4",
            "y": 4,
            value: 3924656
        },
        {
            //westlands
            "id": "id5",
            "y": 5,
            value: 3333
        },
        {
            //embakasi south
            "id": "id6",
            "y": 6,
            value: 33216
        },
        {
            //makadara
            "id": "id7",
            "y": 7,
            value: 323215
        },
        {
            //embakasi west
            "id": "id8",
            "y": 8,
            value: 31564962
        },
        {
            //embakasi central
            "id": "id9",
            "y": 9,
            value: 33165

        },
        {
            //kamkunji
            "id": "id10",
            "y": 10,
            value: 36216532
        },
        {
            //embakasi north
            "id": "id11",
            "y": 11,
            value: 356523
        },
        {
            //embakasi east
            "id": "id12",
            "y": 12,
            value: 3132132
        },
        {
            //kasarani
            "id": "id13",
            "y": 13,
            value: 365413
        },
        {
            //ruaraka 
            "id": "id14",
            "y": 14,
            value: 656132
        },
        {
            //mathare
            "id": "id15",
            "y": 15,
            value: 321165
        },
        {
            //roysambu
            "id": "id16",
            "y": 16,
            value: 30000000
        },
        {
            //unmatched      
            "id": "id18",
            "y": 18,
            value: 300000
        },
        {
            //langata
            "id": "id19",
            "y": 19,
            value: 332568962
        }
    ]);
    $(this).attr('disabled', true).siblings().attr('disabled', false);
    $('#this-month').attr('disabled', false);
    $('#today').attr('disabled', false);
});

//monthly data for this month
$('#this-month').click(function () {
	
	//geting the date
	var the_date =moment().format("MMMM YYYY");
	$('.map-date').text(the_date);
	
    //changing color
	$(this).addClass("active").siblings().removeClass("active");
    $('#the-map-container').highcharts()
        .colorAxis[0].update({
            min: 1,

            minColor: '#3b3b3b',
            maxColor: '#fdc502'
        });

    var chart2 = $('#the-map-container').highcharts();
    chart2.series[0].update([{
            "id": "id0",
            "y": 0,
            value: 230
        },
        {
            //dagoreti south
            "id": "id1",
            "y": 1,
            value: 26,
            name: "Point2",
        },
        {
            //kibra
            "id": "id2",
            "y": 2,
            value: 2252389
        },
        {
            //dagoreti north
            "id": "id3",
            "y": 3,
            value: 2256488
        },
        {
            //starehe
            "id": "id4",
            "y": 4,
            value: 2924656
        },
        {
            //westlands
            "id": "id5",
            "y": 5,
            value: 2333
        },
        {
            //embakasi south
            "id": "id6",
            "y": 6,
            value: 23216
        },
        {
            //makadara
            "id": "id7",
            "y": 7,
            value: 223215
        },
        {
            //embakasi west
            "id": "id8",
            "y": 8,
            value: 21564962
        },
        {
            //embakasi central
            "id": "id9",
            "y": 29,
            value: 23165

        },
        {
            //kamkunji
            "id": "id10",
            "y": 10,
            value: 26216532
        },
        {
            //embakasi north
            "id": "id11",
            "y": 11,
            value: 256523
        },
        {
            //embakasi east
            "id": "id12",
            "y": 12,
            value: 2132132
        },
        {
            //kasarani
            "id": "id13",
            "y": 13,
            value: 265413
        },
        {
            //ruaraka 
            "id": "id14",
            "y": 14,
            value: 2656132
        },
        {
            //mathare
            "id": "id15",
            "y": 15,
            value: 2321165
        },
        {
            //roysambu
            "id": "id16",
            "y": 16,
            value: 21632
        },
        {
            //unmatched      
            "id": "id18",
            "y": 18,
            value: 211365895
        },
        {
            //langata
            "id": "id19",
            "y": 19,
            value: 23
        }
    ]);
     $(this).attr('disabled', true).siblings().attr('disabled', false);
    $('#financial-year').attr('disabled', false);
    $('#today').attr('disabled', false);
});

//daily data for today
$('#today').click(function () {
	//geting the date
	var the_date =moment().format("MMMM Do YYYY");
	$('.map-date').text(the_date);
//	alert(the_date);
    //color change
	$(this).addClass("active").siblings().removeClass("active");
    $('#the-map-container').highcharts()
        .colorAxis[0].update({
            min: 1,

            minColor: '#3b3b3b',
            maxColor: '#45d21a'
        });
    var chart2 = $('#the-map-container').highcharts();
    chart2.series[0].update([{
                "id": "id0",
                "y": 0,
                value: 30
            },
            {
                //dagoreti south
                "id": "id1",
                "y": 1,
                value: 6,
                name: "Point2",
            },
            {
                //kibra
                "id": "id2",
                "y": 2,
                value: 252389
            },
            {
                //dagoreti north
                "id": "id3",
                "y": 3,
                value: 256488
            },
            {
                //starehe
                "id": "id4",
                "y": 4,
                value: 924656
            },
            {
                //westlands
                "id": "id5",
                "y": 5,
                value: 333
            },
            {
                //embakasi south
                "id": "id6",
                "y": 6,
                value: 3216
            },
            {
                //makadara
                "id": "id7",
                "y": 7,
                value: 23215
            },
            {
                //embakasi west
                "id": "id8",
                "y": 8,
                value: 1564962
            },
            {
                //embakasi central
                "id": "id9",
                "y": 9,
                value: 3165

            },
            {
                //kamkunji
                "id": "id10",
                "y": 10,
                value: 6216532
            },
            {
                //embakasi north
                "id": "id11",
                "y": 11,
                value: 56523
            },
            {
                //embakasi east
                "id": "id12",
                "y": 12,
                value: 132132
            },
            {
                //kasarani
                "id": "id13",
                "y": 13,
                value: 65413
            },
            {
                //ruaraka 
                "id": "id14",
                "y": 14,
                value: 656132
            },
            {
                //mathare
                "id": "id15",
                "y": 15,
                value: 321165
            },
            {
                //roysambu
                "id": "id16",
                "y": 16,
                value: 1632
            },
            {
                //unmatched      
                "id": "id18",
                "y": 18,
                value: 11365895
            },
            {
                //langata
                "id": "id19",
                "y": 19,
                value: 3
            }
        ]

    );
     $(this).attr('disabled', true).siblings().attr('disabled', false);
    $('#financial-year').attr('disabled', false);
    $('#this-month').attr('disabled', false);
});

//this week
    $('#this-week').click(function() {
		//getting this weeks dates
		const today = moment();
		const otherday=moment()
		const too_date = otherday.endOf('week');	
		const from_date = today.startOf('week');			
		const the_date=from_date.format("MMMM Do YYYY")+' To '+too_date.format("MMMM Do YYYY");
		$('.map-date').text(the_date);
		
		
    //color change
		$(this).addClass("active").siblings().removeClass("active");
    $('#the-map-container').highcharts()
            .colorAxis[0].update({
				min: 1,
				
				minColor: '#3b3b3b',
				maxColor: '#ea00d9'
			});
    		 var chart2 = $('#the-map-container').highcharts();
        chart2.series[0].update( [
      {
        "id": "id0",
        "y": 0,
        value: 30
      },
      {
        //dagoreti south
        "id": "id1",
        "y": 1,
        value: 6,
        name: "Point2",
      },
      {
      	//kibra
        "id": "id2",
        "y": 2,
        value: 2572389
      },
      {
      	//dagoreti north
        "id": "id3",
        "y": 3,
        value:2576488
      },
      {
      //starehe
        "id": "id4",
        "y": 4,
        value: 9274656
      },
      {
      	//westlands
        "id": "id5",
        "y": 5,
        value:3337776
      },
      {
      	//embakasi south
        "id": "id6",
        "y": 6,
        value:673216
      },
      {
      	//makadara
        "id": "id7",
        "y": 7,
        value: 2328715
      },
      {
      	//embakasi west
        "id": "id8",
        "y": 8,
        value:15564962
      },
      {
      	//embakasi central
        "id": "id9",
        "y": 9,
        value:3166785
        
      },
      {
      	//kamkunji
        "id": "id10",
        "y": 10,
        value:6216789532
      },
      {
      	//embakasi north
        "id": "id11",
        "y": 11,
        value:565423
      },
      {
      	//embakasi east
        "id": "id12",
        "y": 12,
        value:1325132
      },
      {
      	//kasarani
        "id": "id13",
        "y": 13,
        value:657413
      },
      {
      	//ruaraka 
        "id": "id14",
        "y": 14,
        value:6567132
      },
      {
      	//mathare
        "id": "id15",
        "y": 15,
        value:3271165
      },
      {
      	//roysambu
        "id": "id16",
        "y": 16,
        value:1789632
      },      
      {
      //unmatched      
        "id": "id18",
        "y": 18,
        value:11365895
      },
      {
      	//langata
        "id": "id19",
        "y": 19,
        value:78903
      }
    ]
        
        );
        $(this).attr('disabled', true).siblings().attr('disabled', false);
        $('#financial-year').attr('disabled', false);
         $('#this-month').attr('disabled', false);
    });
